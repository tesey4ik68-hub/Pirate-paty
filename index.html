<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∏—Ä–∞—Ç—Å–∫–∏—Ö –±–∏–ª–µ—Ç–æ–≤</title>
  <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      background: url('https://i.imgur.com/3KZJ9lX.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Arial', sans-serif;
      color: #f5d76e;
    }
    .overlay {
      background: rgba(0, 0, 0, 0.8);
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: rgba(0, 0, 0, 0.7);
      border: 3px solid #b8860b;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 0 20px #b8860b;
    }
    h1 {
      font-family: 'MedievalSharp', cursive;
      text-align: center;
      color: #d4af37;
      font-size: 2.2em;
      text-shadow: 2px 2px 5px #000;
    }
    label {
      display: block;
      margin: 15px 0 5px;
      font-weight: bold;
    }
    input, select {
      width: 100%;
      padding: 10px;
      border: 1px solid #b8860b;
      background: #111;
      color: #fff;
      border-radius: 5px;
    }
    button {
      background: #b8860b;
      color: white;
      border: none;
      padding: 12px 20px;
      margin: 20px 5px 20px 0;
      font-size: 1.1em;
      cursor: pointer;
      border-radius: 5px;
      font-weight: bold;
    }
    button:hover {
      background: #d4af37;
    }
    #result {
      display: none;
      margin-top: 30px;
      border: 2px solid #8b4513;
      padding: 15px;
      border-radius: 10px;
      background: rgba(139, 69, 19, 0.2);
    }
    .ticket-link {
      color: #4fc3f7;
      word-break: break-all;
      font-family: monospace;
      font-size: 0.9em;
    }
    .pirate-symbol {
      color: #ffcc00;
    }
    .warning {
      background-color: #b8860b;
      color: #000;
      padding: 10px;
      border-radius: 5px;
      margin: 10px 0;
      font-weight: bold;
    }
    .pass-list {
      margin-top: 30px;
      border: 2px solid #8b4513;
      padding: 15px;
      border-radius: 10px;
      background: rgba(139, 69, 19, 0.2);
      max-height: 400px;
      overflow-y: auto;
    }
    .pass-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      border-bottom: 1px solid #b8860b;
    }
    .pass-item:last-child {
      border-bottom: none;
    }
    .pass-info {
      flex-grow: 1;
    }
    .pass-actions button {
      margin: 0 2px;
      padding: 5px 10px;
      font-size: 0.9em;
    }
    .delete-btn {
      background: #8b0000;
    }
    .delete-btn:hover {
      background: #a52a2a;
    }
    .view-btn {
      background: #006400;
    }
    .view-btn:hover {
      background: #228b22;
    }
    .share-btn {
      background: #4169e1;
    }
    .share-btn:hover {
      background: #6495ed;
    }
    .table-group {
      margin-top: 20px;
      border: 1px solid #b8860b;
      border-radius: 5px;
      padding: 10px;
      background: rgba(184, 134, 11, 0.1);
    }
    .table-header {
      font-weight: bold;
      color: #d4af37;
      border-bottom: 1px solid #b8860b;
      padding-bottom: 5px;
      margin-bottom: 10px;
    }
    .table-pass-item {
      padding: 5px 0;
      border-bottom: 1px dashed #b8860b;
    }
    .table-pass-item:last-child {
      border-bottom: none;
    }
  </style>
</head>
<body>
  <div class="overlay">
    <div class="container">
      <h1>üè¥‚Äç‚ò†Ô∏è –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∏—Ä–∞—Ç—Å–∫–∏—Ö –ø—Ä–æ–ø—É—Å–∫–æ–≤</h1>

      <div class="warning">
        ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–ø—É—Å–∫–∞ –¥–ª—è —Ç–æ–≥–æ –∂–µ –∏–º–µ–Ω–∏ –∏–ª–∏ –º–µ—Å—Ç–∞ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω—ã!
      </div>

      <label for="name">–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è –≥–æ—Å—Ç—è</label>
      <input type="text" id="name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°–æ—à–Ω–∏–∫–æ–≤–∞ –ì–∞–ª–∏–Ω–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞" />

      <label for="gender">–ü–æ–ª –≥–æ—Å—Ç—è</label>
      <select id="gender">
        <option value="male">–ú—É–∂—Å–∫–æ–π</option>
        <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
      </select>

      <label for="table">–ù–æ–º–µ—Ä —Å—Ç–æ–ª–∞</label>
      <select id="table">
        <option value="1">–°—Ç–æ–ª ‚Ññ1</option>
        <option value="2">–°—Ç–æ–ª ‚Ññ2</option>
        <option value="3">–°—Ç–æ–ª ‚Ññ3</option>
        <option value="4">–°—Ç–æ–ª ‚Ññ4</option>
        <option value="5">–°—Ç–æ–ª ‚Ññ5</option>
        <option value="6">–°—Ç–æ–ª ‚Ññ6</option>
        <option value="7">–°—Ç–æ–ª ‚Ññ7</option>
        <option value="8">–°—Ç–æ–ª ‚Ññ8</option>
        <option value="9">–°—Ç–æ–ª ‚Ññ9</option>
        <option value="10">–°—Ç–æ–ª ‚Ññ10</option>
        <option value="11">–°—Ç–æ–ª ‚Ññ11</option>
        <option value="12">–°—Ç–æ–ª ‚Ññ12</option>
        <option value="13" selected>–°—Ç–æ–ª ‚Ññ13</option>
        <option value="14">–°—Ç–æ–ª ‚Ññ14</option>
        <option value="15">–°—Ç–æ–ª ‚Ññ15</option>
      </select>

      <label for="seat">–ú–µ—Å—Ç–æ –∑–∞ —Å—Ç–æ–ª–æ–º</label>
      <input type="number" id="seat" min="1" max="10" value="1" />

      <button onclick="generate()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –±–∏–ª–µ—Ç üè¥‚Äç‚ò†Ô∏è</button>
      <button onclick="loadPasses()">–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>
      <button onclick="showTableGroups()">–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—Ç–æ–ª–∞–º</button>

      <div id="result">
        <h2>–ì–æ—Ç–æ–≤–æ! <span class="pirate-symbol">‚öì</span> –ü—Ä–æ–ø—É—Å–∫ –¥–ª—è <span id="result-name"></span></h2>
        
        <p><strong>–ü–æ–ª:</strong> <span id="result-gender"></span></p>
        <p><strong>–°—Ç–æ–ª:</strong> <span id="result-table"></span></p>
        <p><strong>–ú–µ—Å—Ç–æ:</strong> <span id="result-seat"></span></p>

        <p><strong>–°—Å—ã–ª–∫–∞ –Ω–∞ –±–∏–ª–µ—Ç:</strong></p>
        <div class="ticket-link" id="ticket-link"></div>

        <p style="font-size:0.9em; margin-top:20px;">
          –û—Ç–ø—Ä–∞–≤—å—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É –≥–æ—Å—Ç—é –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–º—É –ø—Ä–æ–ø—É—Å–∫—É.
        </p>
      </div>

      <div class="pass-list">
        <h2>–°–æ–∑–¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–∏</h2>
        <div id="passes-container">
          <!-- –°–ø–∏—Å–æ–∫ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
        </div>
      </div>
    </div>
  </div>

  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤
    function initPassStorage() {
      if (!localStorage.getItem('piratePasses')) {
        localStorage.setItem('piratePasses', JSON.stringify([]));
      }
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–º–µ—Ä–∞ –ø—Ä–æ–ø—É—Å–∫–∞
    function generatePassNumber(name, gender, table, seat) {
      const fullName = name.toLowerCase();
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –≥–æ—Å—Ç—å –∫–æ—Ä–æ–ª–µ–≤—Å–∫–∏–º
      if (fullName.includes('–ø–∞–Ω–∞–º–æ—Ä–µ–Ω–∫–æ')) {
        // –ö–æ—Ä–æ–ª—å - "1", –ö–æ—Ä–æ–ª–µ–≤–∞ "2"
        return gender === 'male' ? '1' : '2';
      } 
      else if (fullName.includes('–≤–µ—à–∫–∏–Ω–∞') && gender === 'female') {
        // –ü—Ä–∏–Ω—Ü–µ—Å—Å–∞ - "3"
        return '3';
      }
      else if (fullName.includes('–±—É—Ä–µ—Ü') && gender === 'male') {
        // –ü—Ä–∏–Ω—Ü - "4"
        return '4';
      }
      else {
        // –î–ª—è –æ–±—ã—á–Ω—ã—Ö –≥–æ—Å—Ç–µ–π: ‚Ññ—Å—Ç–æ–ª–∞ + –Ω–æ–º–µ—Ä –º–µ—Å—Ç–∞ + " - " + –ø–µ—Ä–≤–∞—è –±—É–∫–≤–∞ –∏–º–µ–Ω–∏ (–∑–∞–≥–ª–∞–≤–Ω–∞—è –≤—Å–µ–≥–¥–∞)
        const firstLetter = name.charAt(0).toUpperCase();
        return `${table}${seat} - ${firstLetter}`;
      }
    }

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞
    function savePass(name, gender, table, seat) {
      initPassStorage();
      const passes = JSON.parse(localStorage.getItem('piratePasses'));
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ –ø—Ä–æ–ø—É—Å–∫ —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º
      const existingIndex = passes.findIndex(pass => pass.name === name);
      
      // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–º–µ—Ä –ø—Ä–æ–ø—É—Å–∫–∞
      const passNumber = generatePassNumber(name, gender, table, seat);
      
      const pass = {
        name: name,
        gender: gender,
        table: table,
        seat: seat,
        passNumber: passNumber,
        timestamp: new Date().toISOString()
      };
      
      if (existingIndex >= 0) {
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–ø—É—Å–∫
        passes[existingIndex] = pass;
      } else {
        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –ø—Ä–æ–ø—É—Å–∫
        passes.push(pass);
      }
      
      localStorage.setItem('piratePasses', JSON.stringify(passes));
    }

    // –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞
    function deletePass(name) {
      if (confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ–ø—É—Å–∫ –¥–ª—è ${name}?`)) {
        const passes = JSON.parse(localStorage.getItem('piratePasses'));
        const updatedPasses = passes.filter(pass => pass.name !== name);
        localStorage.setItem('piratePasses', JSON.stringify(updatedPasses));
        loadPasses(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫
      }
    }

    // –§—É–Ω–∫—Ü–∏—è –ø–æ–¥–µ–ª–∏—Ç—å—Å—è
    function sharePass(name, gender, table, seat, passNumber) {
      const ticketUrl = window.location.href.replace('index.html', '') + 
        `ticket.html?name=${encodeURIComponent(name)}&gender=${gender}&table=${table}&seat=${seat}&passNumber=${passNumber}`;
      
      // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –≥–æ—Å—Ç—è –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
      const fullName = name.toLowerCase();
      let shareText;
      
      if (fullName.includes('–ø–∞–Ω–∞–º–æ—Ä–µ–Ω–∫–æ')) {
        shareText = `üëë –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –±–æ—Ä—Ç, –í–∞—à–µ –í–µ–ª–∏—á–µ—Å—Ç–≤–æ ${name.split(' ')[0]}!\n\n–í–æ—Ç –≤–∞—à –∫–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π –ø–∏—Ä–∞—Ç—Å–∫–∏–π –ø—Ä–æ–ø—É—Å–∫ ‚Ññ${passNumber}:\n${ticketUrl}\n\n‚öúÔ∏è –ñ–¥—ë–º –≤–∞—Å 19 —Å–µ–Ω—Ç—è–±—Ä—è!`;
      } else if (fullName.includes('–≤–µ—à–∫–∏–Ω–∞') && gender === 'female') {
        shareText = `üë∏ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –±–æ—Ä—Ç, —é–Ω–∞—è –ø—Ä–∏–Ω—Ü–µ—Å—Å–∞ ${name.split(' ')[0]}!\n\n–í–æ—Ç –≤–∞—à –ø—Ä–∏–Ω—Ü–µ—Å—Å–∏–Ω –ø–∏—Ä–∞—Ç—Å–∫–∏–π –ø—Ä–æ–ø—É—Å–∫ ‚Ññ${passNumber}:\n${ticketUrl}\n\nüéÄ –ñ–¥—ë–º –≤–∞—Å 19 —Å–µ–Ω—Ç—è–±—Ä—è!`;
      } else if (fullName.includes('–±—É—Ä–µ—Ü') && gender === 'male') {
        shareText = `ü§¥ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –±–æ—Ä—Ç, —é–Ω—ã–π –ø—Ä–∏–Ω—Ü ${name.split(' ')[0]}!\n\n–í–æ—Ç –≤–∞—à –ø—Ä–∏–Ω—Ü–µ—Å–∫–∏–π –ø–∏—Ä–∞—Ç—Å–∫–∏–π –ø—Ä–æ–ø—É—Å–∫ ‚Ññ${passNumber}:\n${ticketUrl}\n\nüõ°Ô∏è –ñ–¥—ë–º –≤–∞—Å 19 —Å–µ–Ω—Ç—è–±—Ä—è!`;
      } else {
        shareText = `üè¥‚Äç‚ò†Ô∏è –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –±–æ—Ä—Ç, ${name.split(' ')[0]}!\n\n–í–æ—Ç –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–∏—Ä–∞—Ç—Å–∫–∏–π –ø—Ä–æ–ø—É—Å–∫ ‚Ññ${passNumber}:\n${ticketUrl}\n\n‚öì –ñ–¥—ë–º –≤–∞—Å 19 —Å–µ–Ω—Ç—è–±—Ä—è!`;
      }
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É Web Share API
      if (navigator.share) {
        navigator.share({
          title: fullName.includes('–ø–∞–Ω–∞–º–æ—Ä–µ–Ω–∫–æ') ? '–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π –ø–∏—Ä–∞—Ç—Å–∫–∏–π –ø—Ä–æ–ø—É—Å–∫' : 
                 fullName.includes('–≤–µ—à–∫–∏–Ω–∞') && gender === 'female' ? '–ü—Ä–∏–Ω—Ü–µ—Å—Å–∏–Ω –ø–∏—Ä–∞—Ç—Å–∫–∏–π –ø—Ä–æ–ø—É—Å–∫' : 
                 fullName.includes('–±—É—Ä–µ—Ü') && gender === 'male' ? '–ü—Ä–∏–Ω—Ü–µ—Å–∫–∏–π –ø–∏—Ä–∞—Ç—Å–∫–∏–π –ø—Ä–æ–ø—É—Å–∫' :
                 '–ü–∏—Ä–∞—Ç—Å–∫–∏–π –ø—Ä–æ–ø—É—Å–∫',
          text: shareText,
          url: ticketUrl
        }).catch(error => {
          console.log('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è:', error);
          copyToClipboard(shareText);
        });
      } else {
        copyToClipboard(shareText);
      }
    }

    // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
    function copyToClipboard(text) {
      const textArea = document.createElement("textarea");
      textArea.value = text;
      document.body.appendChild(textArea);
      textArea.select();
      document.execCommand("copy");
      document.body.removeChild(textArea);
      alert("–°—Å—ã–ª–∫–∞ –∏ —Ç–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!");
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤
    function loadPasses() {
      initPassStorage();
      const passes = JSON.parse(localStorage.getItem('piratePasses'));
      const container = document.getElementById('passes-container');
      
      if (passes.length === 0) {
        container.innerHTML = '<p>–ü–æ–∫–∞ –Ω–µ —Å–æ–∑–¥–∞–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–ø—É—Å–∫–∞.</p>';
        return;
      }
      
      container.innerHTML = passes.map(pass => {
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –≥–æ—Å—Ç—è
        const fullName = pass.name.toLowerCase();
        let royalSymbol = '';
        let guestType = '';
        
        if (fullName.includes('–ø–∞–Ω–∞–º–æ—Ä–µ–Ω–∫–æ')) {
          royalSymbol = pass.gender === 'male' ? 'üëë' : 'üëë';
          guestType = ' (–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π)';
        } else if (fullName.includes('–≤–µ—à–∫–∏–Ω–∞') && pass.gender === 'female') {
          royalSymbol = 'üë∏';
          guestType = ' (–ü—Ä–∏–Ω—Ü–µ—Å—Å–∞)';
        } else if (fullName.includes('–±—É—Ä–µ—Ü') && pass.gender === 'male') {
          royalSymbol = 'ü§¥';
          guestType = ' (–ü—Ä–∏–Ω—Ü)';
        }
        
        return `
          <div class="pass-item">
            <div class="pass-info">
              <strong>${royalSymbol} ${pass.name}</strong> ${guestType} (${pass.gender === 'male' ? '–ú' : '–ñ'})<br>
              –°—Ç–æ–ª: ${pass.table}, –ú–µ—Å—Ç–æ: ${pass.seat}, ‚Ññ: ${pass.passNumber}
            </div>
            <div class="pass-actions">
              <button class="view-btn" onclick="viewPass('${pass.name}', '${pass.gender}', '${pass.table}', '${pass.seat}', '${pass.passNumber}')">–û—Ç–∫—Ä—ã—Ç—å</button>
              <button class="share-btn" onclick="sharePass('${pass.name}', '${pass.gender}', '${pass.table}', '${pass.seat}', '${pass.passNumber}')">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
              <button class="delete-btn" onclick="deletePass('${pass.name}')">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
          </div>
        `;
      }).join('');
    }

    // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—Ç–æ–ª–∞–º
    function showTableGroups() {
      initPassStorage();
      const passes = JSON.parse(localStorage.getItem('piratePasses'));
      const container = document.getElementById('passes-container');
      
      if (passes.length === 0) {
        container.innerHTML = '<p>–ü–æ–∫–∞ –Ω–µ —Å–æ–∑–¥–∞–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–ø—É—Å–∫–∞.</p>';
        return;
      }
      
      // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ —Å—Ç–æ–ª–∞–º
      const tables = {};
      passes.forEach(pass => {
        if (!tables[pass.table]) {
          tables[pass.table] = [];
        }
        tables[pass.table].push(pass);
      });
      
      // –°–æ—Ä—Ç–∏—Ä—É–µ–º —Å—Ç–æ–ª—ã –∏ –≥–æ—Å—Ç–µ–π
      const sortedTables = Object.keys(tables).sort((a, b) => parseInt(a) - parseInt(b));
      
      container.innerHTML = sortedTables.map(table => `
        <div class="table-group">
          <div class="table-header">–°—Ç–æ–ª ‚Ññ${table}</div>
          ${tables[table].map(pass => {
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –≥–æ—Å—Ç—è
            const fullName = pass.name.toLowerCase();
            let royalSymbol = '';
            let guestType = '';
            
            if (fullName.includes('–ø–∞–Ω–∞–º–æ—Ä–µ–Ω–∫–æ')) {
              royalSymbol = pass.gender === 'male' ? 'üëë' : 'üëë';
              guestType = ' (–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π)';
            } else if (fullName.includes('–≤–µ—à–∫–∏–Ω–∞') && pass.gender === 'female') {
              royalSymbol = 'üë∏';
              guestType = ' (–ü—Ä–∏–Ω—Ü–µ—Å—Å–∞)';
            } else if (fullName.includes('–±—É—Ä–µ—Ü') && pass.gender === 'male') {
              royalSymbol = 'ü§¥';
              guestType = ' (–ü—Ä–∏–Ω—Ü)';
            }
            
            return `
              <div class="table-pass-item">
                <strong>${royalSymbol} ${pass.name}</strong> ${guestType} (${pass.gender === 'male' ? '–ú' : '–ñ'}) - –ú–µ—Å—Ç–æ: ${pass.seat}, ‚Ññ: ${pass.passNumber}
                <div style="float: right;">
                  <button class="view-btn" onclick="viewPass('${pass.name}', '${pass.gender}', '${pass.table}', '${pass.seat}', '${pass.passNumber}')" style="padding: 2px 5px; font-size: 0.8em;">–û—Ç–∫—Ä—ã—Ç—å</button>
                  <button class="share-btn" onclick="sharePass('${pass.name}', '${pass.gender}', '${pass.table}', '${pass.seat}', '${pass.passNumber}')" style="padding: 2px 5px; font-size: 0.8em;">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
                  <button class="delete-btn" onclick="deletePass('${pass.name}')" style="padding: 2px 5px; font-size: 0.8em;">–£–¥–∞–ª–∏—Ç—å</button>
                </div>
              </div>
            `;
          }).join('')}
        </div>
      `).join('');
    }

    // –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞
    function viewPass(name, gender, table, seat, passNumber) {
      const ticketUrl = `ticket.html?name=${encodeURIComponent(name)}&gender=${gender}&table=${table}&seat=${seat}&passNumber=${passNumber}`;
      window.open(ticketUrl, '_blank');
    }

    function generate() {
      console.log("–§—É–Ω–∫—Ü–∏—è generate() –≤—ã–∑–≤–∞–Ω–∞");
      
      try {
        const name = document.getElementById("name").value.trim();
        const gender = document.getElementById("gender").value;
        const table = document.getElementById("table").value;
        const seat = document.getElementById("seat").value;

        console.log("–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:", {name, gender, table, seat});

        if (!name) {
          alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—é –≥–æ—Å—Ç—è!");
          console.log("–ò–º—è –Ω–µ –≤–≤–µ–¥–µ–Ω–æ, –ø–æ–∫–∞–∑–∞–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ");
          return;
        }

        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–º–µ—Ä –ø—Ä–æ–ø—É—Å–∫–∞
        const passNumber = generatePassNumber(name, gender, table, seat);
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–ø—É—Å–∫
        savePass(name, gender, table, seat);

        // üîó –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –∫ ticket.html
        const ticketUrl = `ticket.html?name=${encodeURIComponent(name)}&gender=${gender}&table=${table}&seat=${seat}&passNumber=${passNumber}`;
        console.log("–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π URL:", ticketUrl);

        document.getElementById("result-name").textContent = name;
        document.getElementById("result-gender").textContent = gender === 'male' ? '–ú—É–∂—Å–∫–æ–π' : '–ñ–µ–Ω—Å–∫–∏–π';
        document.getElementById("result-table").textContent = table;
        document.getElementById("result-seat").textContent = seat;
        document.getElementById("ticket-link").innerHTML = `<a href="${ticketUrl}" target="_blank">${ticketUrl}</a>`;

        // –ü–æ–∫–∞–∑–∞—Ç—å –±–ª–æ–∫ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
        document.getElementById("result").style.display = "block";
        console.log("–†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω");
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–ø—É—Å–∫–æ–≤
        loadPasses();
      } catch (error) {
        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–∏–ª–µ—Ç–∞:", error);
        alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–∏–ª–µ—Ç–∞: " + error.message);
      }
      
      console.log("–§—É–Ω–∫—Ü–∏—è generate() –∑–∞–≤–µ—Ä—à–µ–Ω–∞");
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function() {
      loadPasses();
    });
  </script>
</body>
</html>